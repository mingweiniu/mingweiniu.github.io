function preload(){for(i=0;i<preload.arguments.length;i++)images[i]=new Image,images[i].src=preload.arguments[i]}function resetTopScores(){top1=200,top2=200,top3=200,top4=200,top5=200}function registerTopScore(){var e=bestCorrectDtune;return top1>e?(top5=top4,top4=top3,top3=top2,top2=top1,void(top1=e)):top2>e?(top5=top4,top4=top3,top3=top2,void(top2=e)):top3>e?(top5=top4,top4=top3,void(top3=e)):top4>e?(top5=top4,void(top4=e)):top5>e?void(top5=e):void 0}function showGameScores(){var e="&nbsp;&nbsp;&nbsp;<center>";e+="<table class='pure-table pure-table-bordered' style='width:50%'><thead><tr ><th style ='text-align:center'>Best Games This Session</th></tr></thead><tbody>",200>top1&&(e+="<tr ><td style ='text-align:center'>"+top1+"% of a semitone</td></tr>"),200>top2&&(e+="<tr ><td style ='text-align:center'>"+top2+"% of a semitone</td></tr>"),200>top3&&(e+="<tr ><td style ='text-align:center'>"+top3+"% of a semitone</td></tr>"),200>top4&&(e+="<tr ><td style ='text-align:center'>"+top4+"% of a semitone</td></tr>"),200>top5&&(e+="<tr ><td style ='text-align:center'>"+top5+"% of a semitone</td></tr>"),e+="</tbody></table></center>",document.getElementById("score1").innerHTML=e}function optionChanged(){document.getElementById("radio_high").checked&&(modifyRoot=!1,modifySemitoneOffset=10),document.getElementById("radio_medium").checked&&(modifyRoot=!1,modifySemitoneOffset=0),document.getElementById("radio_low").checked&&(modifyRoot=!1,modifySemitoneOffset=-10),document.getElementById("radio_changing").checked&&(modifyRoot=!0,modifySemitoneOffset=0),document.getElementById("radio_melodic").checked&&(melodic=!0),document.getElementById("radio_harmonic").checked&&(melodic=!1),document.getElementById("radio_first_sine").checked&&(type1="sine"),document.getElementById("radio_first_square").checked&&(type1="square"),document.getElementById("radio_first_sawtooth").checked&&(type1="sawtooth"),document.getElementById("radio_first_triangle").checked&&(type1="triangle"),document.getElementById("radio_second_sine").checked&&(type2="sine"),document.getElementById("radio_second_square").checked&&(type2="square"),document.getElementById("radio_second_sawtooth").checked&&(type2="sawtooth"),document.getElementById("radio_second_triangle").checked&&(type2="triangle")}function generateParams(){currDetuneIndex++,0>currDetuneIndex&&(currDetuneIndex=0),currDetuneIndex>=dtunes.length&&(currDetuneIndex=dtunes.length-1),dtune=dtunes[currDetuneIndex],isAbove=Math.random()<.5?!0:!1,modifyRoot&&(modifySemitoneOffset=Math.floor(25*Math.random())-12),updatePercentString()}function updatePercentString(){document.getElementById("percentString").innerHTML=dtune.toFixed(2)+"% of a Semitone"}function playNotes(){deactivateButtons();var e=audioCtx.createOscillator();e.connect(gain),e.noteOn&&(e.start=e.noteOn);var t=audioCtx.createOscillator();t.connect(gain),t.noteOn&&(t.start=t.noteOn),e.type="sine",e.frequency.value=440,e.detune.value=0,t.type="square",t.frequency.value=440,t.detune.value=80,e.type=type1,e.frequency.value=baseFreq,e.detune.value=100*modifySemitoneOffset,t.type=type2,t.frequency.value=baseFreq,t.detune.value=isAbove?100*modifySemitoneOffset+dtune:100*modifySemitoneOffset-dtune,e.start(.2),e.stop(melodic?audioCtx.currentTime+1.7:audioCtx.currentTime+3.7),t.start(audioCtx.currentTime+2),t.stop(audioCtx.currentTime+3.7),setTimeout(function(){activateButtons()},3800)}function startGame(){currDetuneIndex=-1,bestCorrectDtune=200,document.getElementById("startButton").innerHTML="Restart Game",noIncorrect=0,updateStrikes(),newQuestion()}function endGame(){lowLag.play("endgame"),100>=bestCorrectDtune?(sweetAlert("Game Over!\n\nYour best answer was "+bestCorrectDtune+"% of a semitone.","","success"),registerTopScore()):strikesMsg+=alert("Game Over!"),showGameScores(),document.getElementById("startButton").innerHTML="Start Game",document.getElementById("correctMsg").innerHTML="",document.getElementById("higherButton").style.visibility="hidden",document.getElementById("lowerButton").style.visibility="hidden",document.getElementById("replayButton").style.visibility="hidden"}function higher(){if(isAbove)document.getElementById("correctMsg").innerHTML='<img style="width:30px;height:30px;vertical-align:middle" src="/gorbtools/green-tick-30px.png"> Correct!',lowLag.play("correct"),bestCorrectDtune>dtune&&(bestCorrectDtune=dtune),deactivateButtons(),setTimeout(function(){newQuestion()},1e3);else{if(noIncorrect+=1,currDetuneIndex-=3,document.getElementById("correctMsg").innerHTML='<img style="width:30px;height:30px;vertical-align:middle" src="/gorbtools/red-cross-30px.png"> Incorrect!',updateStrikes(),lowLag.play("mistake"),noIncorrect>4)return void endGame();deactivateButtons(),setTimeout(function(){newQuestion()},1e3)}}function lower(){if(isAbove){if(noIncorrect+=1,currDetuneIndex-=3,document.getElementById("correctMsg").innerHTML='<img style="width:30px;height:30px;vertical-align:middle" src="/gorbtools/red-cross-30px.png"> Incorrect!',updateStrikes(),lowLag.play("mistake"),noIncorrect>4)return void endGame();deactivateButtons(),setTimeout(function(){newQuestion()},1e3)}else document.getElementById("correctMsg").innerHTML='<img style="width:30px;height:30px;vertical-align:middle" src="/gorbtools/green-tick-30px.png"> Correct!',lowLag.play("correct"),bestCorrectDtune>dtune&&(bestCorrectDtune=dtune),deactivateButtons(),setTimeout(function(){newQuestion()},1e3)}function newQuestion(){generateParams(),playNotes()}function deactivateButtons(){document.getElementById("startButton").style.visibility="hidden",document.getElementById("higherButton").style.visibility="hidden",document.getElementById("lowerButton").style.visibility="hidden",document.getElementById("replayButton").style.visibility="hidden"}function activateButtons(){document.getElementById("startButton").style.visibility="visible",document.getElementById("higherButton").style.visibility="visible",document.getElementById("lowerButton").style.visibility="visible",document.getElementById("replayButton").style.visibility="visible"}function updateStrikes(){var e="";e+=5>noIncorrect?"5 Misses and Your Out!<br>":100>=bestCorrectDtune?"Your Out! Your best answer was "+bestCorrectDtune+"% of a semitone.<br>":"Your Out!<br>";var t;for(t=0;noIncorrect>t;t++)e+=' <img style="width:30px;height:30px;vertical-align:middle" src="/gorbtools/red-cross-30px.png"> 	';e+="<br>",document.getElementById("strikes").innerHTML=e}function replay(){playNotes()}function checkIE(){(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&sweetAlert("This app does not support Internet Explorer.","To use this app please use the Safari, Chrome or Firefox browser instead","error"),document.getElementById("higherButton").style.visibility="hidden",document.getElementById("lowerButton").style.visibility="hidden",document.getElementById("replayButton").style.visibility="hidden",updateStrikes()}var over='<div id="overlay"><img id="loading" src="/gorbtools/loading5.gif"></div>';$(over).appendTo("#content"),window.onload=function(){$("#overlay").remove(),resetTopScores(),optionChanged(),showGameScores(),checkIE()},lowLag.init({sm2url:"/gorbtools/lowlag/sm2/swf/"}),lowLag.load(["/gorbtools/sound-effects/correct-soft.mp3","/gorbtools/sound-effects/correct-soft.wav"],"correct"),lowLag.load(["/gorbtools/sound-effects/mistake-soft.mp3","/gorbtools/sound-effects/mistake-soft.wav"],"mistake"),lowLag.load(["/gorbtools/sound-effects/bonus1-soft.mp3","/gorbtools/sound-effects/bonus1-soft.wav"],"bonus1"),lowLag.load(["/gorbtools/sound-effects/bonus2-soft.mp3","/gorbtools/sound-effects/bonus2-soft.wav"],"bonus2"),lowLag.load(["/gorbtools/sound-effects/bonus3-soft.mp3","/gorbtools/sound-effects/bonus3-soft.wav"],"bonus3"),lowLag.load(["/gorbtools/sound-effects/endgame-soft.mp3","/gorbtools/sound-effects/endgame-soft.wav"],"endgame");var images=new Array;preload("/gorbtools/green-tick-50px.png","/gorbtools/green-tick-30px.png","/gorbtools/red-cross-50px.png","/gorbtools/red-cross-30px.png");var top1=0,top2=0,top3=0,top4=0,top5=0,type1="sine",type2="sine",melodic=!1,dtune=15,baseFreq=440,modifyRoot=!0,modifySemitoneOffset=0,bestCorrectDtune=200,isAbove=!0,dtunes=[100,50,30,20,17,15,13,11,10,9,8,7,6,5,4.3,4,3.7,3.3,3,2.7,2.3,2,1.9,1.8,1.7,1.6,1.5,1.4,1.35,1.3,1.25,1.2,1.15,1.1,1.05,1,.96,.92,.9,.86,.83,.8,.76,.73,.7,.66,.63,.6,.56,.52,.5,.46,.43,.4,.36,.33,.3,.26,.23,.2,.16,.13,.1,.09,.08,.07,.06,.05,.04,.03,.02,.01],currDetuneIndex=-1,noIncorrect=0,audioCtx=new(window.AudioContext||window.webkitAudioContext),gain=audioCtx.createGain();gain.connect(audioCtx.destination),gain.gain.value=.35;